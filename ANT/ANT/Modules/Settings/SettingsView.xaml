<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:res="clr-namespace:ANT.Lang"
             xmlns:behavior="clr-namespace:ANT._Behaviors"
             xmlns:convert="clr-namespace:ANT.Converter"
             mc:Ignorable="d"
             x:Class="ANT.Modules.SettingsView"
             Title="{res:Translate Settings}">

    <ContentPage.Resources>
        <convert:InversorConverter x:Key="InversorConverter"/>
        <convert:BoolToOnOffStringSwitchConverter x:Key="BoolToStringConverter"/>

    </ContentPage.Resources>

    <Shell.TitleView>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>
            <Label Text="{res:Translate Settings}" Style="{StaticResource NavigationBarTitleLabelStyle}"
                   x:Name="LabelTitle" />
        </Grid>
    </Shell.TitleView>

    <ContentPage.Content>
        <TableView Intent="Settings" HasUnevenRows="True" Margin="5" >
            <TableRoot>
                <TableSection>
                    <ViewCell>
                        <StackLayout Margin="5">
                            <Label Text="{res:Translate ChangeTheme}" Style="{StaticResource MenuLabelColorStyle}"
                                     />
                            <Picker SelectedIndex="{Binding SelectedThemeIndex}" 
                                    Title="{res:Translate SelectAppTheme}">
                                <Picker.Items>
                                    <x:String>Light</x:String>
                                    <x:String>Dark</x:String>
                                </Picker.Items>
                            </Picker>
                        </StackLayout>
                    </ViewCell>
                </TableSection>
                <TableSection>
                    <ViewCell>
                        <Grid Margin="5">

                            <Label Text="{res:Translate AnimeNotifications}" Style="{StaticResource MenuLabelColorStyle}"/>
                            <Switch x:Name="NotificationSwitch" Grid.Row="1" IsToggled="{Binding Settings.NotificationsIsOn, Mode=TwoWay}">
                                <Switch.Behaviors>
                                    <behavior:EventToCommandBehavior EventName="Toggled"
                                                                     Command="{Binding SwitchNotificationCommand}"/>
                                </Switch.Behaviors>
                            </Switch>
                            <Label Grid.Row="1" Margin="3,0,0,0" Text="{Binding IsToggled, Source={x:Reference NotificationSwitch}
                                , Converter={StaticResource BoolToStringConverter}}" FontSize="Subtitle"/>
                        </Grid>

                    </ViewCell>
                </TableSection>
                <!--<TableSection>
                    <ViewCell>
                        <StackLayout>
                            <Grid Margin="0,10,0,10">
                                <Label Text="{res:Translate AutomaticTranslate}" Style="{StaticResource MenuLabelColor}"
                                   VerticalOptions="Center"/>
                                <Switch Grid.ColumnSpan="2" IsToggled="{Binding IsAutomaticTranslate}"/>
                            </Grid>

                            <StackLayout IsVisible="{Binding IsAutomaticTranslate, Converter={StaticResource InversorConverter}}">
                                <Label  Text="{res:Translate ChangeLanguage}" Style="{StaticResource MenuLabelColor}"/>
                                <Picker SelectedIndex="{Binding SelectedLangIndex}" 
                                    Title="{res:Translate SelectAppLang}">
                                    <Picker.Items>
                                        <x:String>en-US</x:String>
                                        <x:String>pt-BR</x:String>
                                    </Picker.Items>
                                </Picker>
                            </StackLayout>

                        </StackLayout>
                    </ViewCell>
                </TableSection>-->
            </TableRoot>
        </TableView>
    </ContentPage.Content>
</ContentPage>